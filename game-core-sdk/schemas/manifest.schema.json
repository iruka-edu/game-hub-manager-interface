{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Iruka Game Manifest",
  "type": "object",
  "required": ["id", "title", "version", "runtime", "entryUrl"],
  "additionalProperties": false,
  "properties": {
    "id": {
      "type": "string",
      "maxLength": 64,
      "pattern": "^com\\.iruka\\.[a-z](?:[a-z0-9]*)(?:-[a-z0-9]+)*$",
      "description": "Unique identifier following com.iruka.<slug> format with kebab-case"
    },
    "title": {
      "type": "string",
      "minLength": 3,
      "maxLength": 40,
      "pattern": "^(?!\\s)(?!.*\\s$)(?![A-Z\\s]+$)[^\\p{Cc}\\p{Cs}\\p{So}]{3,40}$",
      "description": "Display name: 3-40 characters, no emoji/control characters, no leading/trailing spaces, not all UPPERCASE"
    },
    "version": {
      "type": "string",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-(?:0|[1-9]\\d*|\\d*[a-zA-Z-][\\da-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][\\da-zA-Z-]*))*)?(?:\\+[\\da-zA-Z-]+(\\.[\\da-zA-Z-]+)*)?$",
      "description": "Semantic Versioning (SemVer). Production recommended without prerelease"
    },
    "runtime": {
      "type": "string",
      "enum": ["iframe-html", "esm-module"],
      "description": "Runtime type for game execution"
    },
    "entryUrl": {
      "type": "string",
      "format": "uri",
      "pattern": "^https://.+/games/com\\.iruka\\.[a-z](?:[a-z0-9]*)(?:-[a-z0-9]+)*/(0|[1-9]\\d*\\.\\d+\\.\\d+)/index\\.html$",
      "description": "Entry point URL must match id and version, ending with /index.html"
    },
    "iconUrl": {
      "type": "string",
      "format": "uri",
      "pattern": "^https://.+\\.(png|jpg|jpeg|webp|svg)$",
      "description": "Game icon URL (PNG, JPG, JPEG, WebP, SVG)"
    },
    "capabilities": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["score", "save-progress", "levels", "hints", "audio", "telemetry", "leaderboard"]
      },
      "uniqueItems": true,
      "description": "List of game capabilities"
    },
    "minHubVersion": {
      "type": "string",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$",
      "description": "Minimum required Hub version"
    },
    "disabled": {
      "type": "boolean",
      "description": "Temporarily disable game"
    }
  }
}